{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/examples/pages/demo/App.vue?cccf","webpack:///./src/lib/3dviewer/Utils.js","webpack:///./src/lib/3dviewer/OBJLoaderParse.js","webpack:///./src/lib/3dviewer/MTLLoaderMaterialCreator.js","webpack:///./src/lib/3dviewer/OMLoader.js","webpack:///./src/lib/ModelView.vue?72ab","webpack:///./src/lib/3dviewer/TextureControl.js","webpack:///./src/examples/components/HelloWorld.vue?3551","webpack:///./src/lib/3dviewer/ViewerControl.js","webpack:///./src/examples/pages/demo/App.vue?4af3","webpack:///./src/examples/components/HelloWorld.vue?09be","webpack:///src/examples/components/HelloWorld.vue","webpack:///./src/examples/components/HelloWorld.vue?0817","webpack:///./src/examples/components/HelloWorld.vue","webpack:///src/examples/pages/demo/App.vue","webpack:///./src/examples/pages/demo/App.vue?1949","webpack:///./src/examples/pages/demo/App.vue?f7d4","webpack:///./src/lib/ModelView.vue?2683","webpack:///src/lib/ModelView.vue","webpack:///./src/lib/ModelView.vue?2e5e","webpack:///./src/lib/ModelView.vue?9af4","webpack:///./src/lib/index.js","webpack:///./src/examples/pages/demo/index.js","webpack:///./src/lib/ModelView.vue?d0bb","webpack:///./src/lib/3dviewer/lib/TrackballControls.js","webpack:///./src/lib/3dviewer/Context.js","webpack:///./src/examples/assets/icon_3d.png","webpack:///./src/lib/3dviewer/index.js","webpack:///./src/lib/assets/loading.png","webpack:///./src/lib/3dviewer/lib/loaders/MTLLoader.js","webpack:///./src/lib/3dviewer/lib/Detector.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","demo","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","callFunc","func","__webpack_exports__","CustomOBJLoaderParse","THREE","maxSize","bestObjSize","vertices","scale","parseInt","console","log","time","timeEnd","OBJLoader","parse","text","debug","state","this","_createParserState","indexOf","replace","lines","split","line","lineFirstChar","lineSecondChar","lineLength","trimLeft","trim","charAt","regexp","vertex_pattern","exec","getMaxSize","v","abcV","Math","abs","parseFloat","normal_pattern","normals","uv_pattern","uvs","onError","face_vertex_uv_normal","addFace","face_vertex_uv","face_vertex_normal","undefined","face_vertex","lineParts","substring","lineVertices","lineUVs","li","llen","parts","addLineGeometry","object_pattern","substr","startObject","material_use_pattern","test","startMaterial","materialLibraries","material_library_pattern","smoothing_pattern","toLowerCase","smooth","material","currentMaterial","finalize","container","Group","concat","objects","geometry","materials","isLine","type","buffergeometry","BufferGeometry","addAttribute","BufferAttribute","Float32Array","computeVertexNormals","createdMaterials","mi","miLen","sourceMaterial","LineBasicMaterial","materialLine","copy","MeshPhongMaterial","shading","SmoothShading","FlatShading","mesh","addGroup","groupStart","groupCount","multiMaterial","MultiMaterial","LineSegments","Mesh","add","CustomMTLLoaderMaterialCreator","context","OldParams","map","specular","shininess","MTLLoader","MaterialCreator","createMaterial_","materialName","_this","oldParams","mat","materialsInfo","params","side","prop","Color","fromArray","loadTexture","baseUrl","texture","needsUpdate","configPLight","wrapS","wrap","wrapT","require","OMLoader","OBJLoaderParse","MTLLoaderMaterialCreator","objLoader","load","objUrl","mtlUrl","onLoad","__this","loadMTL","textureMat","loader","FileLoader","manager","obj","msg","error","url","cb","mtlLoader","max","lastIndexOf","preload","loadOM","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ModelView_vue_vue_type_style_index_1_id_3058383d_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ModelView_vue_vue_type_style_index_1_id_3058383d_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","TextureControl","success","blankMat","traverseObjMat","getRenderMat","oMat","settings","showTexture","setValues","wireframe","showWire","traverse","Array","mixinTexture","hide","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_HelloWorld_vue_vue_type_style_index_0_id_34e51707_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_HelloWorld_vue_vue_type_style_index_0_id_34e51707_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","ViewerControl","calcSize","size","x","boundingbox","BoundingBoxHelper","update","boundingSphere","radius","attributes","position","array","y","z","bestLook","_mesh","getBasicMesh","meshKeys","meshs","rotation","controls","reset","camera","sceneRadiusForCamera","sqrt","lookAt","bestPosition","xAxis","Vector3","rotateOnAxis","PI","rotateLeft","speed","rotSpeed","cos","sin","scene","Appvue_type_template_id_2b9487c2_render","_vm","_h","$createElement","_c","_self","attrs","id","staticRenderFns","HelloWorldvue_type_template_id_34e51707_scoped_true_render","staticStyle","width","height","ref","loading-img","loading","background-color","options","model_options","loadingSuccess","_e","_v","staticClass","class","action","on","click","$event","rotate","wire","change","$refs","viewer","toFront","HelloWorldvue_type_template_id_34e51707_scoped_true_staticRenderFns","HelloWorldvue_type_script_lang_js_","methods","toggleTexture","toggleRotate","toggleWire","components_HelloWorldvue_type_script_lang_js_","component","componentNormalizer","HelloWorld","Appvue_type_script_lang_js_","components","demo_Appvue_type_script_lang_js_","App_component","App","ModelViewvue_type_template_id_3058383d_scoped_true_render","style","background","backgroundColor","isLoadSuccess","src","imageSrc","controller","ModelViewvue_type_template_id_3058383d_scoped_true_staticRenderFns","defaultLoading","ModelViewvue_type_script_lang_js_","created","$threeViewer","_3dviewer","loadingImg","props","String","required","Boolean","default","showModel","init","mtl","Utils","resetView","destroy","mounted","addAnim","cssText","onerror","$options","_componentTag","beforeDestroy","watch","options.objUrl","handler","__THIS","JSON","stringify","lib_ModelViewvue_type_script_lang_js_","ModelView_component","ModelView","plugin","install","Vue","config","productionTip","use","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ModelView_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_dist_cjs_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ModelView_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","TrackballControls","domElement","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM","TOUCH_PAN","document","enabled","screen","left","top","rotateSpeed","zoomSpeed","panSpeed","noRotate","noZoom","noPan","noRoll","staticMoving","dynamicDampingFactor","minDistance","maxDistance","Infinity","keys","target","EPS","lastPosition","_state","_prevState","_eye","_rotateStart","_rotateEnd","_zoomStart","Vector2","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","up0","up","changeEvent","startEvent","endEvent","keydown","event","removeEventListener","keyCode","keyup","addEventListener","mousedown","preventDefault","stopPropagation","button","getMouseOnScreen","pageX","pageY","getMouseProjectionOnBall","mousemove","mouseup","dispatchEvent","mousewheel","delta","wheelDelta","detail","touchstart","touches","dx","dy","touchmove","touchend","handleResize","innerWidth","innerHeight","box","getBoundingClientRect","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","handleEvent","vector","set","objectUp","mouseOnBall","projection","SQRT1_2","normalize","sub","setLength","cross","rotateCamera","axis","quaternion","Quaternion","angle","acos","dot","crossVectors","setFromAxisAngle","applyQuaternion","zoomCamera","factor","multiplyScalar","panCamera","mouseChange","pan","lengthSq","subVectors","checkDistances","addVectors","distanceToSquared","EventDispatcher","Context","renderer","pointLight","customSettings","assign","WebGLRenderer","alpha","setSize","clientWidth","clientHeight","Scene","PerspectiveCamera","ambientLight","AmbientLight","PointLight","innerHTML","appendChild","isBasic","url2key","Buffer","from","toString","key2url","str","getOwnPropertyNames","traverseSupportMultiTexture","realMesh","hasTextureImg","color","intensity","oMLoader","viewerControl","textureControl","requestAnimationFrameId","ThreeViewer","requestAnimationFrame","changeObjsStatus","removeObj","cancelAnimationFrame","Detector","webgl","addGetWebGLMessage","addObj","utils","changeTexture","mtlurl","basicMesh","Error","remove","crossOrigin","constructor","scope","XHRLoader","info","delimiter_pattern","pos","ss","materialCreator","setMaterials","materialsArray","nameLookup","FrontSide","RepeatWrapping","convert","converted","mn","covmat","save","lprop","normalizeRGB","ignoreZeroRGBs","invertTransparency","getIndex","getAsArray","index","mapping","Loader","Handlers","Texture","ImageLoader","image","ensurePowerOfTwo_","isPowerOfTwo","canvas","createElement","nextHighestPowerOfTwo_","ctx","getContext","drawImage","CanvasRenderingContext2D","WebGLRenderingContext","e","workers","Worker","fileapi","File","FileReader","FileList","Blob","getWebGLErrorMessage","element","fontFamily","fontSize","fontWeight","textAlign","padding","margin","join","parameters","parent","body"],"mappings":"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","file":"js/demo.6ab8e7f8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"demo\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/27\n * ======================================== */\n\nfunction callFunc(func) {\n    func && func.call && func.call()\n}\n\nexport default {\n    callFunc\n}","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/27\n * ======================================== */\n\n/**\n * 替换掉THREE对象的 OBJLoader对象的parse方法，修改了一些逻辑（动态调整模型大小）\n * @param THREE\n */\nfunction CustomOBJLoaderParse(THREE) {\n\n    let maxSize = 0\n\n    /**\n     * 动态调整模型适合的大小\n     */\n    function bestObjSize(vertices) {\n\n        // 模型点坐标有大于500的进行调整\n        let scale = parseInt(maxSize/500)\n        if (scale <= 1) return\n\n        console.log(`模型过大,调整模型缩小${scale}倍`)\n        console.time('OBJLoaderParse.js: resize obj')\n        for(let i in vertices){\n            vertices[i] /= scale\n        }\n        console.timeEnd('OBJLoaderParse.js: resize obj')\n    }\n\n    THREE.OBJLoader.prototype.parse = function parse(text, debug) {\n\n        // 重置 max size\n        maxSize = 0\n\n        if (typeof debug === 'undefined') {\n            debug = true;\n        }\n\n        if (debug) {\n            console.time('OBJLoader');\n        }\n\n        let state = this._createParserState();\n\n        if (text.indexOf('\\r\\n') !== -1) {\n\n            // This is faster than String.split with regex that splits on both\n            text = text.replace(/\\r\\n/g, '\\n');\n        }\n\n        if (text.indexOf('\\\\\\n') !== -1) {\n\n            // join lines separated by a line continuation character (\\)\n            text = text.replace(/\\\\\\n/g, '');\n        }\n\n        let lines = text.split('\\n');\n        let line = '',\n            lineFirstChar = '',\n            lineSecondChar = '';\n        let lineLength = 0;\n        let result = [];\n\n        // Faster to just trim left side of the line. Use if available.\n        let trimLeft = typeof ''.trimLeft === 'function';\n\n\n        /**\n         * -----------------------------------------------------------------------------------------\n         * kuangch 001_STA\n         * date: 2019.4.27\n         * v的解析单独提出来进行处理\n         *\n         * old code:\n         * state.vertices.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n         */\n\n        for (let i = 0, l = lines.length; i < l; i++) {\n\n            line = lines[i];\n\n            line = trimLeft ? line.trimLeft() : line.trim();\n\n            lineLength = line.length;\n\n            if (lineLength === 0) continue;\n\n            lineFirstChar = line.charAt(0);\n\n            // @todo invoke passed in handler if any\n            if (lineFirstChar === '#') continue;\n\n            if (lineFirstChar === 'v') {\n\n                lineSecondChar = line.charAt(1);\n\n                if (lineSecondChar === ' ' && (result = this.regexp.vertex_pattern.exec(line)) !== null) {\n\n                    function getMaxSize(v) {\n                        let abcV = Math.abs(v)\n                        if (maxSize < abcV) maxSize = abcV\n                        return v\n                    }\n\n                    state.vertices.push(getMaxSize(parseFloat(result[1])), parseFloat(result[2]), parseFloat(result[3]));\n\n                }\n            }\n        }\n\n        bestObjSize(state.vertices)\n        /**\n         * kuangch 001_END\n         * -----------------------------------------------------------------------------------------\n         */\n\n        for (let i = 0, l = lines.length; i < l; i++) {\n\n            line = lines[i];\n\n            line = trimLeft ? line.trimLeft() : line.trim();\n\n            lineLength = line.length;\n\n            if (lineLength === 0) continue;\n\n            lineFirstChar = line.charAt(0);\n\n            // @todo invoke passed in handler if any\n            if (lineFirstChar === '#') continue;\n\n            if (lineFirstChar === 'v') {\n\n                lineSecondChar = line.charAt(1);\n\n                if (lineSecondChar === ' ') {\n                    // 挪到外面单独执行\n                } else if (lineSecondChar === 'n' && (result = this.regexp.normal_pattern.exec(line)) !== null) {\n\n                    // 0                   1      2      3\n                    // [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n                    state.normals.push(parseFloat(result[1]), parseFloat(result[2]), parseFloat(result[3]));\n                } else if (lineSecondChar === 't' && (result = this.regexp.uv_pattern.exec(line)) !== null) {\n\n                    // 0               1      2\n                    // [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n                    state.uvs.push(parseFloat(result[1]), parseFloat(result[2]));\n                } else {\n\n                    this.onError(\"Unexpected vertex/normal/uv line: '\" + line + \"'\");\n                }\n            } else if (lineFirstChar === \"f\") {\n\n                if ((result = this.regexp.face_vertex_uv_normal.exec(line)) !== null) {\n\n                    // f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n                    // 0                        1    2    3    4    5    6    7    8    9   10         11         12\n                    // [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n\n                    state.addFace(result[1], result[4], result[7], result[10], result[2], result[5], result[8], result[11], result[3], result[6], result[9], result[12]);\n                } else if ((result = this.regexp.face_vertex_uv.exec(line)) !== null) {\n\n                    // f vertex/uv vertex/uv vertex/uv\n                    // 0                  1    2    3    4    5    6   7          8\n                    // [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n                    state.addFace(result[1], result[3], result[5], result[7], result[2], result[4], result[6], result[8]);\n                } else if ((result = this.regexp.face_vertex_normal.exec(line)) !== null) {\n\n                    // f vertex//normal vertex//normal vertex//normal\n                    // 0                     1    2    3    4    5    6   7          8\n                    // [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n                    state.addFace(result[1], result[3], result[5], result[7], undefined, undefined, undefined, undefined, result[2], result[4], result[6], result[8]);\n                } else if ((result = this.regexp.face_vertex.exec(line)) !== null) {\n\n                    // f vertex vertex vertex\n                    // 0            1    2    3   4\n                    // [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n                    state.addFace(result[1], result[2], result[3], result[4]);\n                } else {\n\n                    this.onError(\"Unexpected face line: '\" + line + \"'\");\n                }\n            } else if (lineFirstChar === \"l\") {\n\n                let lineParts = line.substring(1).trim().split(\" \");\n                let lineVertices = [],\n                    lineUVs = [];\n\n                if (line.indexOf(\"/\") === -1) {\n\n                    lineVertices = lineParts;\n                } else {\n\n                    for (let li = 0, llen = lineParts.length; li < llen; li++) {\n\n                        let parts = lineParts[li].split(\"/\");\n\n                        if (parts[0] !== \"\") lineVertices.push(parts[0]);\n                        if (parts[1] !== \"\") lineUVs.push(parts[1]);\n                    }\n                }\n                state.addLineGeometry(lineVertices, lineUVs);\n            } else if ((result = this.regexp.object_pattern.exec(line)) !== null) {\n\n                // o object_name\n                // or\n                // g group_name\n\n                // WORKAROUND: https://bugs.chromium.org/p/v8/issues/detail?id=2869\n                // let name = result[ 0 ].substr( 1 ).trim();\n                let name = (\" \" + result[0].substr(1).trim()).substr(1);\n\n                state.startObject(name);\n            } else if (this.regexp.material_use_pattern.test(line)) {\n\n                // material\n\n                state.object.startMaterial(line.substring(7).trim(), state.materialLibraries);\n            } else if (this.regexp.material_library_pattern.test(line)) {\n\n                // mtl file\n\n                state.materialLibraries.push(line.substring(7).trim());\n            } else if ((result = this.regexp.smoothing_pattern.exec(line)) !== null) {\n\n                // smooth shading\n\n                // @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n                // but does not define a usemtl for each face set.\n                // This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n                // This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n                // where explicit usemtl defines geometry groups.\n                // Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n                let value = result[1].trim().toLowerCase();\n                state.object.smooth = value === '1' || value === 'on';\n\n                let material = state.object.currentMaterial();\n                if (material) {\n\n                    material.smooth = state.object.smooth;\n                }\n            } else {\n\n                // Handle null terminated files without exception\n                if (line === '\\0') continue;\n\n                this.onError(\"Unexpected line: '\" + line + \"'\");\n            }\n        }\n\n        state.finalize();\n\n        let container = new THREE.Group();\n        container.materialLibraries = [].concat(state.materialLibraries);\n\n        for (let i = 0, l = state.objects.length; i < l; i++) {\n\n            let object = state.objects[i];\n            let geometry = object.geometry;\n            let materials = object.materials;\n            let isLine = geometry.type === 'Line';\n\n            // Skip o/g line declarations that did not follow with any faces\n            if (geometry.vertices.length === 0) continue;\n\n            let buffergeometry = new THREE.BufferGeometry();\n\n            buffergeometry.addAttribute('position', new THREE.BufferAttribute(new Float32Array(geometry.vertices), 3));\n\n            if (geometry.normals.length > 0) {\n\n                buffergeometry.addAttribute('normal', new THREE.BufferAttribute(new Float32Array(geometry.normals), 3));\n            } else {\n\n                buffergeometry.computeVertexNormals();\n            }\n\n            if (geometry.uvs.length > 0) {\n\n                buffergeometry.addAttribute('uv', new THREE.BufferAttribute(new Float32Array(geometry.uvs), 2));\n            }\n\n            // Create materials\n\n            let createdMaterials = [];\n\n            for (let mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n                let sourceMaterial = materials[mi];\n                let material = undefined;\n\n                if (this.materials !== null) {\n\n                    material = this.materials.create(sourceMaterial.name);\n\n                    // mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n                    if (isLine && material && !(material instanceof THREE.LineBasicMaterial)) {\n\n                        let materialLine = new THREE.LineBasicMaterial();\n                        materialLine.copy(material);\n                        material = materialLine;\n                    }\n                }\n\n                if (!material) {\n\n                    material = !isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial();\n                    material.name = sourceMaterial.name;\n                }\n\n                material.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n\n                createdMaterials.push(material);\n            }\n\n            // Create mesh\n\n            let mesh;\n\n            if (createdMaterials.length > 1) {\n\n                for (let mi = 0, miLen = materials.length; mi < miLen; mi++) {\n\n                    let sourceMaterial = materials[mi];\n                    buffergeometry.addGroup(sourceMaterial.groupStart, sourceMaterial.groupCount, mi);\n                }\n\n                let multiMaterial = new THREE.MultiMaterial(createdMaterials);\n                mesh = !isLine ? new THREE.Mesh(buffergeometry, multiMaterial) : new THREE.LineSegments(buffergeometry, multiMaterial);\n            } else {\n\n                mesh = !isLine ? new THREE.Mesh(buffergeometry, createdMaterials[0]) : new THREE.LineSegments(buffergeometry, createdMaterials[0]);\n            }\n\n            mesh.name = object.name;\n\n            container.add(mesh);\n        }\n\n        if (debug) {\n            console.timeEnd('OBJLoader');\n        }\n\n        return container;\n    }\n}\n\nexport default CustomOBJLoaderParse","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/27\n * ======================================== */\n\n/**\n * 替换掉THREE对象的 MTLLoader.MaterialCreator对象的 \"createMaterial_\" 方法，修改了一些逻辑（纹理图片加载完成前后的一些处理）\n * @param THREE\n * @param context\n */\n\nfunction CustomMTLLoaderMaterialCreator(THREE,context) {\n\n    function OldParams(material) {\n        this.map =  material.map\n        this.specular =  material.specular          // 镜面反射光颜色(mtl中的ks)\n        this.shininess = material.shininess         // 光亮（mtl中的ns)\n    }\n\n    THREE.MTLLoader.MaterialCreator.prototype.createMaterial_ = function ( materialName ) {\n\n        let _this = this\n        let oldParams = null\n        // Create material\n        var mat = this.materialsInfo[ materialName ];\n        var params = {\n\n            name: materialName,\n            side: this.side\n\n        };\n\n        for ( var prop in mat ) {\n\n            var value = mat[ prop ];\n\n            switch ( prop.toLowerCase() ) {\n\n                // Ns is material specular exponent\n\n                case 'kd':\n\n                    // Diffuse color (color under white light) using RGB values\n\n                    params[ 'diffuse' ] = new THREE.Color().fromArray( value );\n\n                    break;\n\n                case 'ka':\n\n                    // Ambient color (color under shadow) using RGB values\n\n                    params[ 'ambient' ] = new THREE.Color().fromArray( value );\n\n                    break;\n\n                case 'ks':\n\n                    // Specular color (color when light is reflected from shiny surface) using RGB values\n                    params[ 'specular' ] = new THREE.Color().fromArray( value );\n\n                    break;\n\n                case 'map_kd':\n\n                    // Diffuse texture map\n\n                    params['map'] = this.loadTexture(this.baseUrl + value, null, function (texture) {\n\n                        //纹理图片加载成功回调\n                        if(oldParams){\n\n                            _this.materials[ materialName ].map = oldParams.map\n                            _this.materials[ materialName ].specular = oldParams.specular\n                            _this.materials[ materialName ].shininess = oldParams.shininess\n\n                            // 更换了材质了需要更新\n                            _this.materials[ materialName ].needsUpdate = true\n\n                            context && context.configPLight()\n\n                        }else{\n                            oldParams = true\n                        }\n\n\n                    });\n                    params[ 'map' ].wrapS = this.wrap;\n                    params[ 'map' ].wrapT = this.wrap;\n\n                    break;\n\n                case 'ns':\n\n                    // The specular exponent (defines the focus of the specular highlight)\n                    // A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\n\n                    params['shininess'] = value;\n\n                    break;\n\n                case 'd':\n\n                    // According to MTL format (http://paulbourke.net/dataformats/mtl/):\n                    //   d is dissolve for current material\n                    //   factor of 1.0 is fully opaque, a factor of 0 is fully dissolved (completely transparent)\n\n                    if ( value < 1 ) {\n\n                        params['transparent'] = true;\n                        params['opacity'] = value;\n\n                    }\n\n                    break;\n\n                default:\n                    break;\n\n            }\n\n        }\n\n        if ( params[ 'diffuse' ] ) {\n\n            if ( !params[ 'ambient' ]) params[ 'ambient' ] = params[ 'diffuse' ];\n            params[ 'color' ] = params[ 'diffuse' ];\n\n        }\n\n        this.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\n\n        // 纹理图片加载出来前，将一下属性值先修改和空白纹理同名属性值一致,先缓存一下解析出来的参数\n        if (!oldParams){\n            oldParams = new OldParams(this.materials[ materialName ])\n            this.materials[ materialName ].map = null\n            this.materials[ materialName ].specular = new THREE.Color(0.0667,0.0667,0.0667)\n            this.materials[ materialName ].shininess = 30\n        }\n\n        return this.materials[ materialName ];\n\n    }\n\n}\n\nexport default CustomMTLLoaderMaterialCreator","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/25\n * ======================================== */\n\nlet THREE = require('three')\nlet OBJLoader = require('three-obj-loader');\nrequire('./lib/loaders/MTLLoader');\n\nimport OBJLoaderParse from './OBJLoaderParse'\nimport MTLLoaderMaterialCreator from './MTLLoaderMaterialCreator'\n\n/**\n * 自定义mtl，obj文件加载类\n * 1.修改一些共有模块的某些方法，适应本项目\n * 2.未此项目定义一些通用的load相关方法\n * @constructor\n */\nfunction OMLoader(context) {\n\n    // 包装obj loader (把OBJLoader挂到THREE对象上)\n    OBJLoader(THREE)\n\n    // 对THREE对象上的某些方法进行覆盖以适应逻辑\n    OBJLoaderParse(THREE)\n    MTLLoaderMaterialCreator(THREE, context)\n\n    this.objLoader = new THREE.OBJLoader();\n    this.context = context;\n    let _this = this\n\n    // 定义自定义的obj加载器\n    _this.objLoader.load = function (objUrl, mtlUrl, onLoad) {\n        let __this = this;\n\n        let mesh = {}\n        mesh.size = [];\n        mesh.isBasic = false;\n\n        _this.loadMTL(mtlUrl, function (textureMat) {\n            let loader = new THREE.FileLoader(__this.manager);\n            loader.load(objUrl, function (text) {\n\n                mesh.obj = __this.parse(text)\n                mesh.textureMat = textureMat\n\n                onLoad(mesh);\n            });\n        })\n\n        // 定义自定义的obj加载器错误处理function\n        _this.objLoader.onError = function(msg){\n            console.error(msg)\n        }\n\n    };\n\n}\n\n/**\n * 加载解析mtl文件,生成材质对象\n * @param url  mtl文件\n * @param cb  成功回调\n */\nOMLoader.prototype.loadMTL = function(url, cb) {\n    let mtlLoader = new THREE.MTLLoader(url.substr(0, Math.max(url.lastIndexOf(\"/\"), url.lastIndexOf(\"\\\\\")) + 1));\n    mtlLoader.load(url, function (materials) {\n        let textureMat = materials;\n        textureMat.preload();\n        cb(textureMat)\n    })\n}\n\n\n/**\n * 加载解析obj文件,并结合mtl生成mesh\n * @param objUrl obj 文件\n * @param mtlUrl mtl 文件\n * @param onLoad 加载完成回调\n */\nOMLoader.prototype.loadOM = function(objUrl, mtlUrl, onLoad) {\n    this.objLoader.load(objUrl,mtlUrl,onLoad)\n}\n\nexport default OMLoader","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelView.vue?vue&type=style&index=1&id=3058383d&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelView.vue?vue&type=style&index=1&id=3058383d&scoped=true&lang=scss&\"","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/25\n * ======================================== */\nlet THREE = require('three')\n\n/**\n * 纹理显示或隐藏控制类\n * @param context 渲染上下文（Context)\n * @param success 空纹理创建成功回调\n * @constructor\n */\nfunction TextureControl(context, success) {\n    this.blankMat = null\n    this.context = context\n\n    let _this = this\n\n    // 创建一个空纹理，创建后加载模型\n    let mtlLoader = new THREE.MTLLoader();\n    mtlLoader.load('',function (materials) {\n        _this.blankMat = materials\n        success && success.call && success()\n    })\n}\n\n\n/**\n * 根据配置上下文load纹理\n * @param mesh\n */\nTextureControl.prototype.mixinTexture = function (mesh) {\n\n    let obj = mesh && mesh.obj\n    if (!obj || mesh.hide) {\n        return;\n    }\n\n    traverseObjMat(this.context,this.blankMat,mesh)\n\n}\n\n/**\n * 模型纹理的详细处理\n * @param context\n * @param blankMat\n * @param mesh\n */\nfunction traverseObjMat(context,blankMat,mesh) {\n\n    // 根据配置使用load的mtl文件对象创建渲染纹理\n    function getRenderMat(oMat) {\n        if (oMat && oMat.name) {\n            let material = (context.settings.showTexture ? mesh.textureMat : blankMat).create(oMat.name)\n            material.setValues({\n                wireframe: !!context.settings.showWire\n            })\n            return material\n        }\n        return oMat\n    }\n\n    mesh.obj.traverse(function (object) {\n        if (object instanceof THREE.Mesh) {\n            if (object.material instanceof Array){\n                // obj 中定义了多纹理\n                for (let m in object.material) {\n                    object.material[m] = getRenderMat(object.material[m])\n                }\n            }else{\n                // obj 中只定义了一个纹理\n                object.material = getRenderMat(object.material)\n            }\n        }\n    });\n\n    //模型状态的改变可能需要重新配置点光源光照\n    context.configPLight()\n}\n\nexport default TextureControl","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=34e51707&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=style&index=0&id=34e51707&scoped=true&lang=scss&\"","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/25\n * ======================================== */\nlet THREE = require('three')\n\n/**\n * 视觉控制类\n * @param context 渲染上下文（Context)\n * @constructor\n */\nfunction ViewerControl(context) {\n    this.context = context\n}\n\n/**\n * 调整相机位置，视角使能以最佳位置观看\n */\nViewerControl.prototype.bestLook = function (mesh) {\n\n    let context = this.context\n\n    // 如果传入具体mesh则调整具体mesh的视角，否则调整基mesh的视角\n    let _mesh = mesh || context.getBasicMesh() || context.meshKeys().length === 1 && context.meshs[context.meshKeys()[0]]\n    if(!_mesh) return\n\n    // 旋转角度重置\n    _mesh.obj.rotation.z = 0;\n\n    // 控制器重置\n    context.controls.reset();\n\n    // 相机位置重置\n    context.camera.position.z = 0;\n    context.camera.position.y = 0;\n\n    calcSize(_mesh)\n\n    // 计算获得相机最佳x方向位置并调整\n    let sceneRadiusForCamera = Math.max(_mesh.size.x, _mesh.size.y, _mesh.size.z) / 2 * (1 + Math.sqrt(5));\n    if (sceneRadiusForCamera) context.camera.position.x = sceneRadiusForCamera\n    window.console.log(`sceneRadiusForCamera： ${sceneRadiusForCamera}`)\n\n    context.camera.lookAt(_mesh.obj.position)\n\n}\n\n/**\n * 计算模型大小，调整模型位置，角度, 并调整为最佳观看位置\n */\nViewerControl.prototype.bestPosition = function() {\n\n    let context = this.context\n    let mesh = context.getBasicMesh()\n    if(!mesh) return\n\n    // 模型旋转90度\n    let xAxis = new THREE.Vector3(0, 1, 0);\n    mesh.obj.rotateOnAxis(xAxis, 90 * Math.PI / 180);\n\n    calcSize(mesh)\n\n    // 模型位置调整（位置调整到模型中间点）\n    let boundingbox = new THREE.BoundingBoxHelper(mesh.obj, 0xff0000);\n    boundingbox.update();\n    mesh.obj.position.x = -boundingbox.geometry.attributes.position.array[3] - mesh.size.x / 2;\n    mesh.obj.position.y = -boundingbox.geometry.attributes.position.array[7] - mesh.size.y / 2;\n    mesh.obj.position.z = -boundingbox.geometry.attributes.position.array[14] - mesh.size.z / 2;\n    boundingbox.update();\n\n    // 模型旋转角度重置\n    mesh.obj.rotation.z = 0;\n\n}\n\n/**\n * 模型旋转展示\n */\nViewerControl.prototype.rotateLeft = function (speed) {\n\n    let context = this.context\n    let rotSpeed = speed || .01;\n    let x = context.camera.position.x,\n        z = context.camera.position.z;\n\n    context.camera.position.x = x * Math.cos(rotSpeed) + z * Math.sin(rotSpeed);\n    context.camera.position.z = z * Math.cos(rotSpeed) - x * Math.sin(rotSpeed);\n\n    context.camera.lookAt(context.scene.position);\n}\n\n/**\n * 计算模型的大小\n * @param mesh\n */\nfunction calcSize(mesh) {\n\n    if(mesh.size.x > 0) return\n    // 计算模型大小\n    let boundingbox = new THREE.BoundingBoxHelper(mesh.obj, 0xff0000);\n    boundingbox.update();\n    window.console.log(\"box radius: \" + boundingbox.geometry.boundingSphere.radius);\n\n    // 大小设置给模型\n    mesh.size.x = boundingbox.geometry.attributes.position.array[0] - boundingbox.geometry.attributes.position.array[3];\n    mesh.size.y = boundingbox.geometry.attributes.position.array[1] - boundingbox.geometry.attributes.position.array[7];\n    mesh.size.z = boundingbox.geometry.attributes.position.array[2] - boundingbox.geometry.attributes.position.array[14];\n    window.console.log(mesh.size);\n}\n\nexport default ViewerControl","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('HelloWorld')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"200px\",\"height\":\"200px\"}},[_c('model-view',{ref:\"viewer\",attrs:{\"loading-img\":_vm.loading,\"background-color\":\"transparent\",\"options\":_vm.model_options}}),(!_vm.loadingSuccess)?_c('div',[_vm._v(\"加载中，请耐心等待..\")]):_vm._e(),(_vm.loadingSuccess)?_c('div',{staticClass:\"btn\",class:{'action': _vm.model_options.texture},on:{\"click\":function($event){return _vm.texture()}}},[_vm._v(\"纹理\")]):_vm._e(),(_vm.loadingSuccess)?_c('div',{staticClass:\"btn\",class:{'action': _vm.model_options.rotate},on:{\"click\":function($event){return _vm.rotate()}}},[_vm._v(\"旋转\")]):_vm._e(),(_vm.loadingSuccess)?_c('div',{staticClass:\"btn\",class:{'action': _vm.model_options.wire},on:{\"click\":function($event){return _vm.wire()}}},[_vm._v(\"网格\")]):_vm._e(),(_vm.loadingSuccess)?_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.change()}}},[_vm._v(\"切换\")]):_vm._e(),(_vm.loadingSuccess)?_c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$refs.viewer.toFront()}}},[_vm._v(\"正面\")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n  <div style=\"width: 200px;height: 200px;\">\n      <model-view ref=\"viewer\" :loading-img=\"loading\" background-color=\"transparent\" :options=\"model_options\"/>\n\n      <div v-if=\"!loadingSuccess\">加载中，请耐心等待..</div>\n      <div v-if=\"loadingSuccess\" class=\"btn\" :class=\"{'action': model_options.texture}\" @click=\"texture()\">纹理</div>\n      <div v-if=\"loadingSuccess\" class=\"btn\" :class=\"{'action': model_options.rotate}\" @click=\"rotate()\">旋转</div>\n      <div v-if=\"loadingSuccess\" class=\"btn\" :class=\"{'action': model_options.wire}\" @click=\"wire()\">网格</div>\n      <div v-if=\"loadingSuccess\" class=\"btn\" @click=\"change()\">切换</div>\n      <div v-if=\"loadingSuccess\" class=\"btn\" @click=\"$refs.viewer.toFront()\">正面</div>\n  </div>\n\n</template>\n\n<script>\nlet loading = require('../assets/icon_3d.png')\nexport default {\n  name: 'HelloWorld',\n  data(){\n      return {\n          model_options:{\n              objUrl: 'ring/stone1.obj',\n              mtlUrl: 'ring/stone1.mtl',\n              texture: true,\n              wire: false,\n              rotate: false,\n              success: this.success\n          },\n          loading: undefined,\n          loadingSuccess: false\n      }\n  },\n\n  methods:{\n      texture: function () {\n          this.model_options.texture = this.$refs.viewer.toggleTexture()\n      },\n      rotate: function () {\n          this.model_options.rotate = this.$refs.viewer.toggleRotate()\n      },\n      wire: function () {\n          this.model_options.wire = this.$refs.viewer.toggleWire()\n      },\n      change: function () {\n          this.loadingSuccess = false\n          if(this.model_options.objUrl === 'ring/ring1.obj'){\n              this.model_options.mtlUrl = 'ring/stone1.mtl'\n              this.model_options.objUrl = 'ring/stone1.obj'\n          }else{\n              this.model_options.mtlUrl = 'ring/ring1.mtl'\n              this.model_options.objUrl = 'ring/ring1.obj'\n          }\n      },\n      success: function () {\n          this.loadingSuccess = true\n      }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n    div{\n        display: inline-block;\n\n        .btn{\n            text-decoration:underline;\n            color: grey;\n            cursor:pointer;\n            padding-left: 5px;\n            padding-right: 5px;\n        }\n\n        .btn.action{\n            color: blue;\n        }\n    }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HelloWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HelloWorld.vue?vue&type=template&id=34e51707&scoped=true&\"\nimport script from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./HelloWorld.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HelloWorld.vue?vue&type=style&index=0&id=34e51707&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34e51707\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <HelloWorld/>\n  </div>\n</template>\n\n<script>\nimport HelloWorld from '../../components/HelloWorld.vue'\n\nexport default {\n  name: 'app',\n  components: {\n    HelloWorld\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2b9487c2&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"c\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\",\"position\":\"relative\"}},[_c('div',{ref:\"container\",staticClass:\"container\",style:({background: _vm.backgroundColor}),attrs:{\"id\":_vm.options.objUrl}}),(!_vm.isLoadSuccess)?_c('img',{ref:\"loadingImg\",staticClass:\"loading\",attrs:{\"src\":_vm.imageSrc}}):_vm._e(),(_vm.isLoadSuccess && _vm.controller)?_c('div',{staticClass:\"control\"},[_c('i',{staticClass:\"iconfont icon-reset\",on:{\"click\":function($event){return _vm.toFront()}}}),_c('i',{staticClass:\"iconfont icon-rotate-obj\",class:{'action': _vm.settings.rotate},on:{\"click\":function($event){return _vm.toggleRotate()}}}),_c('i',{staticClass:\"iconfont icon-texture\",class:{'action': _vm.settings.texture},on:{\"click\":function($event){return _vm.toggleTexture()}}}),_c('i',{staticClass:\"iconfont icon-wire-earth\",class:{'action': _vm.settings.wire},on:{\"click\":function($event){return _vm.toggleWire()}}})]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n    <div style=\"width: 100%;height: 100%; position: relative;\" class=\"c\">\n        <div :id=\"options.objUrl\" ref=\"container\" class=\"container\" :style=\"{background: backgroundColor}\"></div>\n        <img v-if=\"!isLoadSuccess\" class=\"loading\" :src=\"imageSrc\" ref=\"loadingImg\"/>\n        <div class=\"control\" v-if=\"isLoadSuccess && controller\">\n            <i class=\"iconfont icon-reset\" @click=\"toFront()\"></i>\n            <i class=\"iconfont icon-rotate-obj\" :class=\"{'action': settings.rotate}\" @click=\"toggleRotate()\"></i>\n            <i class=\"iconfont icon-texture\" :class=\"{'action': settings.texture}\" @click=\"toggleTexture()\"></i>\n            <i class=\"iconfont icon-wire-earth\" :class=\"{'action': settings.wire}\" @click=\"toggleWire()\"></i>\n        </div>\n    </div>\n\n</template>\n\n<script>\n    import ThreeViewer from './3dviewer'\n    import utils from './3dviewer/Utils'\n    let defaultLoading = require('./assets/loading.png')\n\n    export default {\n        name: \"model-view\",\n        created(){\n            this.$threeViewer = new ThreeViewer()\n        },\n        data(){\n            return{\n                isLoadSuccess:false,\n                imageSrc: this.loadingImg,\n                settings:{\n                    rotate: this.options.rotate,\n                    texture: this.options.texture,\n                    wire: this.options.wire,\n                    success: this.options.success,\n                }\n            }\n        },\n\n        props:{\n            backgroundColor:{\n                type:String,\n                required: false\n            },\n            options:{\n                type: Object,\n                required: true\n            },\n            loadingImg:{\n                type:String,\n                required: false\n            },\n            controller:{\n                type:Boolean,\n                default: true,\n                required: false\n            }\n        },\n\n        methods:{\n            showModel: function(options){\n                this.isLoadSuccess = false\n                let _this = this;\n                this.$threeViewer.init({\n                    container: _this.$refs.container,\n                    showTexture: _this.settings.texture,\n                    showWire: _this.settings.wire,\n                    rotate: _this.settings.rotate,\n                    mesh:[\n                        {\n                            obj: options.objUrl || '',\n                            mtl: options.mtlUrl || '',\n                        }\n                    ],\n                    success: function(){\n                        utils.callFunc(_this.settings.success)\n                        _this.isLoadSuccess = true\n                    }\n                })\n            },\n\n            toFront: function () {\n                this.$threeViewer.toFront()\n            },\n            toggleTexture: function () {\n                this.settings.texture = this.$threeViewer.toggleTexture()\n                return this.settings.texture\n            },\n            toggleRotate: function () {\n                this.settings.rotate = this.$threeViewer.toggleRotate()\n                return this.settings.rotate\n            },\n            toggleWire: function () {\n                this.settings.wire = this.$threeViewer.toggleWire()\n                return this.settings.wire\n            },\n\n            resetView: function(){\n                this.isLoadSuccess = false\n                this.$threeViewer.destroy();\n            },\n        },\n\n        mounted(){\n            let _this = this\n\n            // 使用自带loading旋转\n            function addAnim(){\n                _this.$refs.loadingImg.style.cssText += 'animation: rotate 2s 0s infinite linear;'\n            }\n\n            _this.$refs.loadingImg.onerror = () => {\n                _this.imageSrc = defaultLoading\n                // 动画旋转\n                addAnim()\n            }\n\n            if(_this.imageSrc === undefined){\n                _this.imageSrc = defaultLoading\n                // 动画旋转\n                _this.$refs.loadingImg.style.cssText += 'animation: rotate 2s 0s infinite linear;'\n                addAnim()\n            }\n\n            window.console.log(`${this.$options._componentTag} mounted`)\n            this.showModel(this.options)\n        },\n\n        beforeDestroy(){\n            window.console.log( `${this.$options._componentTag} beforeDestroy`)\n            this.resetView()\n        },\n\n        watch:{\n            'options.objUrl':{\n                handler: function () {\n                    let __THIS = this\n                    window.console.log(`ModelView: model changed to:`)\n                    window.console.log(JSON.stringify(__THIS.options, null, 2))\n                    __THIS.showModel(__THIS.options)\n                },\n                // deep: true,\n            }\n        }\n    }\n</script>\n\n<style>\n    @keyframes rotate {\n        to{\n            transform:  translate(-50%, -50%) rotate(360deg);\n        }\n    }\n</style>\n\n<style scoped lang=\"scss\">\n    @import \"fonts/iconfont.css\";\n\n    .c{\n        overflow: hidden;\n    }\n\n    .loading{\n        display: inline-block;\n        position: absolute;\n        width: 20%;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        /*animation: rotate 2s 0s infinite linear;*/\n        transform-origin: 50% 50%;\n    }\n\n    .container{\n        position: absolute;\n        display: inline-block;\n        top:0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: gainsboro;\n    }\n\n    .control{\n        position: absolute;\n        right: 0.4em;\n        bottom: 1%;\n        transition: opacity 300ms;\n        opacity: 0;\n        i{\n            font-size: 1em !important;\n            cursor: pointer;\n            color: #555;\n            margin-left: 2%;\n        }\n        i.action{\n            color: blue;\n        }\n    }\n    .control:hover{\n        opacity: 1;\n    }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModelView.vue?vue&type=template&id=3058383d&scoped=true&\"\nimport script from \"./ModelView.vue?vue&type=script&lang=js&\"\nexport * from \"./ModelView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModelView.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./ModelView.vue?vue&type=style&index=1&id=3058383d&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3058383d\",\n  null\n  \n)\n\nexport default component.exports","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2018/7/20\n * ======================================== */\n\nimport plugin from './ModelView.vue'\n\nplugin.install = function (Vue) {\n    Vue.component(plugin.name, plugin)\n}\n\n// if (typeof window !== 'undefined' && window.Vue) {\n//     window.Vue.use(ConvenienceImage);\n// }\nexport default plugin","import Vue from 'vue'\nimport App from './App.vue'\nimport ModelView from '../../../lib'\n\nVue.config.productionTip = false\n\nVue.use(ModelView)\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelView.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelView.vue?vue&type=style&index=0&lang=css&\"","import Detector from \"./Detector\";\n\n/**\n * @author Eberhard Graether / http://egraether.com/\n * @author Mark Lundin \t/ http://mark-lundin.com\n */\nlet THREE = require('three')\n\nTHREE.TrackballControls = function ( object, domElement ) {\n\n\tvar _this = this;\n\tvar STATE = { NONE: -1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM: 4, TOUCH_PAN: 5 };\n\n\tthis.object = object;\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\tthis.rotateSpeed = 1.0;\n\tthis.zoomSpeed = 1.2;\n\tthis.panSpeed = 0.3;\n\n\tthis.noRotate = false;\n\tthis.noZoom = false;\n\tthis.noPan = false;\n\tthis.noRoll = false;\n\n\tthis.staticMoving = false;\n\tthis.dynamicDampingFactor = 0.2;\n\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\n\n\t// internals\n\n\tthis.target = new THREE.Vector3();\n\n\tvar EPS = 0.000001;\n\n\tvar lastPosition = new THREE.Vector3();\n\n\tvar _state = STATE.NONE,\n\t_prevState = STATE.NONE,\n\n\t_eye = new THREE.Vector3(),\n\n\t_rotateStart = new THREE.Vector3(),\n\t_rotateEnd = new THREE.Vector3(),\n\n\t_zoomStart = new THREE.Vector2(),\n\t_zoomEnd = new THREE.Vector2(),\n\n\t_touchZoomDistanceStart = 0,\n\t_touchZoomDistanceEnd = 0,\n\n\t_panStart = new THREE.Vector2(),\n\t_panEnd = new THREE.Vector2();\n\n\t// for reset\n\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.up0 = this.object.up.clone();\n\n\t// events\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start'};\n\tvar endEvent = { type: 'end'};\n\n\n\t// methods\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.screen.left = 0;\n\t\t\tthis.screen.top = 0;\n\t\t\tthis.screen.width = window.innerWidth;\n\t\t\tthis.screen.height = window.innerHeight;\n\n\t\t} else {\n\n\t\t\tvar box = this.domElement.getBoundingClientRect();\n\t\t\t// adjustments come from similar code in the jquery offset() function\n\t\t\tvar d = this.domElement.ownerDocument.documentElement;\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\t\tthis.screen.width = box.width;\n\t\t\tthis.screen.height = box.height;\n\n\t\t}\n\n\t};\n\n\tthis.handleEvent = function ( event ) {\n\n\t\tif ( typeof this[ event.type ] == 'function' ) {\n\n\t\t\tthis[ event.type ]( event );\n\n\t\t}\n\n\t};\n\n\tthis.getMouseOnScreen = function ( pageX, pageY, vector ) {\n\n\t\treturn vector.set(\n\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\n\t\t\t( pageY - _this.screen.top ) / _this.screen.height\n\t\t);\n\n\t};\n\n\tthis.getMouseProjectionOnBall = (function(){\n\n\t\tvar objectUp = new THREE.Vector3(),\n\t\t    mouseOnBall = new THREE.Vector3();\n\n\n\t\treturn function ( pageX, pageY, projection ) {\n\n\t\t\tmouseOnBall.set(\n\t\t\t\t( pageX - _this.screen.width * 0.5 - _this.screen.left ) / (_this.screen.width*.5),\n\t\t\t\t( _this.screen.height * 0.5 + _this.screen.top - pageY ) / (_this.screen.height*.5),\n\t\t\t\t0.0\n\t\t\t);\n\n\t\t\tvar length = mouseOnBall.length();\n\n\t\t\tif ( _this.noRoll ) {\n\n\t\t\t\tif ( length < Math.SQRT1_2 ) {\n\n\t\t\t\t\tmouseOnBall.z = Math.sqrt( 1.0 - length*length );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmouseOnBall.z = .5 / length;\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t} else if ( length > 1.0 ) {\n\n\t\t\t\tmouseOnBall.normalize();\n\n\t\t\t} else {\n\n\t\t\t\tmouseOnBall.z = Math.sqrt( 1.0 - length * length );\n\n\t\t\t}\n\n\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\n\n\t\t\tprojection.copy( _this.object.up ).setLength( mouseOnBall.y )\n\t\t\tprojection.add( objectUp.copy( _this.object.up ).cross( _eye ).setLength( mouseOnBall.x ) );\n\t\t\tprojection.add( _eye.setLength( mouseOnBall.z ) );\n\n\t\t\treturn projection;\n\t\t}\n\n\t}());\n\n\tthis.rotateCamera = (function(){\n\n\t\tvar axis = new THREE.Vector3(),\n\t\t\tquaternion = new THREE.Quaternion();\n\n\n\t\treturn function () {\n\n\t\t\tvar angle = Math.acos( _rotateStart.dot( _rotateEnd ) / _rotateStart.length() / _rotateEnd.length() );\n\n\t\t\tif ( angle ) {\n\n\t\t\t\taxis.crossVectors( _rotateStart, _rotateEnd ).normalize();\n\n\t\t\t\tangle *= _this.rotateSpeed;\n\n\t\t\t\tquaternion.setFromAxisAngle( axis, -angle );\n\n\t\t\t\t_eye.applyQuaternion( quaternion );\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\n\n\t\t\t\t_rotateEnd.applyQuaternion( quaternion );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_rotateStart.copy( _rotateEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tquaternion.setFromAxisAngle( axis, angle * ( _this.dynamicDampingFactor - 1.0 ) );\n\t\t\t\t\t_rotateStart.applyQuaternion( quaternion );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}());\n\n\tthis.zoomCamera = function () {\n\n\t\tif ( _state === STATE.TOUCH_ZOOM ) {\n\n\t\t\tvar factor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\n\t\t\t_eye.multiplyScalar( factor );\n\n\t\t} else {\n\n\t\t\tvar factor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\t_eye.multiplyScalar( factor );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_zoomStart.copy( _zoomEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.panCamera = (function(){\n\n\t\tvar mouseChange = new THREE.Vector2(),\n\t\t\tobjectUp = new THREE.Vector3(),\n\t\t\tpan = new THREE.Vector3();\n\n\t\treturn function () {\n\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\n\n\t\t\tif ( mouseChange.lengthSq() ) {\n\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\n\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\n\n\t\t\t\t_this.object.position.add( pan );\n\t\t\t\t_this.target.add( pan );\n\n\t\t\t\tif ( _this.staticMoving ) {\n\n\t\t\t\t\t_panStart.copy( _panEnd );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}());\n\n\tthis.checkDistances = function () {\n\n\t\tif ( !_this.noZoom || !_this.noPan ) {\n\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\n\n\t\t\t}\n\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\n\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.update = function () {\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\tif ( !_this.noRotate ) {\n\n\t\t\t_this.rotateCamera();\n\n\t\t}\n\n\t\tif ( !_this.noZoom ) {\n\n\t\t\t_this.zoomCamera();\n\n\t\t}\n\n\t\tif ( !_this.noPan ) {\n\n\t\t\t_this.panCamera();\n\n\t\t}\n\n\t\t_this.object.position.addVectors( _this.target, _eye );\n\n\t\t_this.checkDistances();\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\n\n\t\t\t_this.dispatchEvent( changeEvent );\n\n\t\t\tlastPosition.copy( _this.object.position );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\t_state = STATE.NONE;\n\t\t_prevState = STATE.NONE;\n\n\t\t_this.target.copy( _this.target0 );\n\t\t_this.object.position.copy( _this.position0 );\n\t\t_this.object.up.copy( _this.up0 );\n\n\t\t_eye.subVectors( _this.object.position, _this.target );\n\n\t\t_this.object.lookAt( _this.target );\n\n\t\t_this.dispatchEvent( changeEvent );\n\n\t\tlastPosition.copy( _this.object.position );\n\n\t};\n\n\t// listeners\n\n\tfunction keydown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\twindow.removeEventListener( 'keydown', keydown );\n\n\t\t_prevState = _state;\n\n\t\tif ( _state !== STATE.NONE ) {\n\n\t\t\treturn;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && !_this.noRotate ) {\n\n\t\t\t_state = STATE.ROTATE;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && !_this.noZoom ) {\n\n\t\t\t_state = STATE.ZOOM;\n\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && !_this.noPan ) {\n\n\t\t\t_state = STATE.PAN;\n\n\t\t}\n\n\t}\n\n\tfunction keyup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\t_state = _prevState;\n\n\t\twindow.addEventListener( 'keydown', keydown, false );\n\n\t}\n\n\tfunction mousedown( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.NONE ) {\n\n\t\t\t_state = event.button;\n\n\t\t}\n\n\t\tif ( _state === STATE.ROTATE && !_this.noRotate ) {\n\n\t\t\t_this.getMouseProjectionOnBall( event.pageX, event.pageY, _rotateStart );\n\t\t\t_rotateEnd.copy(_rotateStart)\n\n\t\t} else if ( _state === STATE.ZOOM && !_this.noZoom ) {\n\n\t\t\t_this.getMouseOnScreen( event.pageX, event.pageY, _zoomStart );\n\t\t\t_zoomEnd.copy(_zoomStart);\n\n\t\t} else if ( _state === STATE.PAN && !_this.noPan ) {\n\n\t\t\t_this.getMouseOnScreen( event.pageX, event.pageY, _panStart );\n\t\t\t_panEnd.copy(_panStart)\n\n\t\t}\n\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\n\t\t_this.dispatchEvent( startEvent );\n\n\n\t}\n\n\tfunction mousemove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( _state === STATE.ROTATE && !_this.noRotate ) {\n\n\t\t\t_this.getMouseProjectionOnBall( event.pageX, event.pageY, _rotateEnd );\n\n\t\t} else if ( _state === STATE.ZOOM && !_this.noZoom ) {\n\n\t\t\t_this.getMouseOnScreen( event.pageX, event.pageY, _zoomEnd );\n\n\t\t} else if ( _state === STATE.PAN && !_this.noPan ) {\n\n\t\t\t_this.getMouseOnScreen( event.pageX, event.pageY, _panEnd );\n\n\t\t}\n\n\t}\n\n\tfunction mouseup( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t_state = STATE.NONE;\n\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction mousewheel( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tvar delta = 0;\n\n\t\tif ( event.wheelDelta ) { // WebKit / Opera / Explorer 9\n\n\t\t\tdelta = event.wheelDelta / 40;\n\n\t\t} else if ( event.detail ) { // Firefox\n\n\t\t\tdelta = - event.detail / 3;\n\n\t\t}\n\n\t\t_zoomStart.y += delta * 0.01;\n\t\t_this.dispatchEvent( startEvent );\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction touchstart( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\n\t\t\t\t_rotateEnd.copy( _this.getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY, _rotateStart ));\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_state = STATE.TOUCH_ZOOM;\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\t_state = STATE.TOUCH_PAN;\n\t\t\t\t_panEnd.copy( _this.getMouseOnScreen( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY, _panStart ));\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\t\t_this.dispatchEvent( startEvent );\n\n\n\t}\n\n\tfunction touchmove( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_this.getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY, _rotateEnd );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy )\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\t_this.getMouseOnScreen( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY, _panEnd );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t_state = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction touchend( event ) {\n\n\t\tif ( _this.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\t\t\t\t_rotateStart.copy( _this.getMouseProjectionOnBall( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY, _rotateEnd ));\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd = 0;\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\t_panStart.copy( _this.getMouseOnScreen( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY, _panEnd ));\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t_state = STATE.NONE;\n\t\t_this.dispatchEvent( endEvent );\n\n\t}\n\n\tthis.domElement.addEventListener( 'contextmenu', function ( event ) { event.preventDefault(); }, false );\n\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\n\n\tthis.domElement.addEventListener( 'mousewheel', mousewheel, false );\n\tthis.domElement.addEventListener( 'DOMMouseScroll', mousewheel, false ); // firefox\n\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\twindow.addEventListener( 'keydown', keydown, false );\n\twindow.addEventListener( 'keyup', keyup, false );\n\n\tthis.handleResize();\n\n\t// force an update at start\n\tthis.update();\n\n};\n\nTHREE.TrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\nexport default THREE.TrackballControls\n","/* ========================================\n *  company : Dilusense\n *   author : Kuangch\n *     date : 2019/4/25\n * ======================================== */\nimport TrackballControls from './lib/TrackballControls'\nlet THREE = require('three');\n\n/**\n * 模型加载相关上下文对象\n * @constructor\n */\nfunction Context() {\n    this.camera = null\n    this.scene = null\n    this.renderer = null\n    this.controls = null\n    this.pointLight = null\n    this.meshs = {}\n    this.settings = {\n        showTexture: true,\n        showWire: true,\n        rotate: true,\n    }\n}\n\n// 上下文初始化\nContext.prototype.init = function (customSettings) {\n\n    // 扩展用户配置\n    Object.assign(this.settings, customSettings);\n\n    // 渲染器\n    this.renderer = new THREE.WebGLRenderer({alpha: true});\n    this.renderer.setSize(this.settings.container.clientWidth, this.settings.container.clientHeight);\n\n    // 场景（世界）\n    this.scene = new THREE.Scene();\n\n    // 相机\n    this.camera = new THREE.PerspectiveCamera(45, this.settings.container.clientWidth / this.settings.container.clientHeight, 1, 2000 * 300);\n\n    // 鼠标控制\n    this.controls = new TrackballControls(this.camera, this.settings.container);\n    this.controls.rotateSpeed = 1.0;\n    this.controls.zoomSpeed = 1.2;\n    this.controls.panSpeed = 0.2;\n    this.controls.noZoom = false;\n    this.controls.noPan = false;\n    this.controls.staticMoving = false;\n    this.controls.dynamicDampingFactor = 0.3;\n    //this.controls.minDistance = 200;\n    //this.controls.maxDistance = 1000;\n    this.controls.keys = [65, 83, 68]; // [ rotateKey, zoomKey, panKey ]\n\n    // 环境光\n    let ambientLight = new THREE.AmbientLight(0xdddddd, 0.4);\n    this.scene.add(ambientLight);\n\n    // 点光源\n    this.pointLight = new THREE.PointLight();\n    this.camera.add(this.pointLight);\n    this.scene.add(this.camera);\n    this.configPLight()\n\n    // 画布容器\n    this.settings.container.innerHTML = \"\";\n    this.settings.container.appendChild(this.renderer.domElement);\n}\n\n/**\n * 获取基 mesh\n * @returns {*}\n */\nContext.prototype.getBasicMesh = function(){\n\n    let mesh\n    // 选择基 mesh\n    for (let m in this.meshs) {\n        if (this.meshs[m].isBasic) {\n            mesh = this.meshs[m]\n            mesh.key = m\n            break\n        }\n    }\n    return mesh\n}\n\n/**\n * 获取基础模型\n * @returns {*}\n */\nContext.prototype.getBasicMesh = function(){\n\n    let mesh\n    // 选择基 mesh\n    for (let m in this.meshs) {\n        if (this.meshs[m].isBasic) {\n            mesh = this.meshs[m]\n            mesh.key = m\n            break\n        }\n    }\n    return mesh\n}\n\n/**\n * url 转成 base64编码的字符串便于作为key\n * @param url\n */\nContext.prototype.url2key = function (url) {\n    return Buffer.from(url).toString('base64')\n}\n\n/**\n * base64编码的字符串 转成 url\n * @param str\n */\nContext.prototype.key2url = function (str) {\n    return new Buffer(str, 'base64').toString()\n}\n\n/**\n * url 获取所有mesh的keys\n */\nContext.prototype.meshKeys = function () {\n    return Object.getOwnPropertyNames(this.meshs)\n}\n\n/**\n *  上下文销毁重置\n */\nContext.prototype.reset = function() {\n    Context.call(this)\n}\n\n/**\n * 自定义支持多纹理处理的 traverse方法\n * @param realMesh  THREE mesh对象\n * @param cb 回调返回所有纹理对象\n */\nContext.prototype.traverseSupportMultiTexture  = function (realMesh,cb) {\n    realMesh && realMesh.traverse(function (object) {\n        if (object instanceof THREE.Mesh) {\n            if (object.material instanceof Array){\n                // obj 中定义了多纹理\n                for (let m in object.material) {\n                    if (object.material[m]) cb(object.material[m])\n                }\n            }else{\n                // obj 中定义了一个纹理\n                if (object.material) cb(object.material)\n            }\n        }\n    });\n}\n/**\n * 点光源光照配置(显示纹理和不显示纹理,并且所有的obj中有有纹理的obj)\n */\nContext.prototype.configPLight = function() {\n    let _this = this\n\n    // 获取是否真正有纹理（解决因为纹理图片加载未完成导致的实际无纹理问题）\n    let hasTextureImg = false\n    for(let mesh in this.meshs){\n        _this.traverseSupportMultiTexture(_this.meshs[mesh].obj,function (material) {\n            if(material.map) hasTextureImg = true\n        })\n    }\n\n    this.pointLight.color.set(this.settings.showTexture && hasTextureImg ? 0xffffff : 0x888888);\n    this.pointLight.intensity = 0.6;\n}\n\nexport default Context","module.exports = __webpack_public_path__ + \"img/icon_3d.30c74037.png\";","/* ========================================\r\n *  company : Dilusense\r\n *   author : Kuangch\r\n *     date : 2019/04/10\r\n * ======================================== */\r\nimport Detector from './lib/Detector'\r\nimport Context from './Context'\r\nimport TextureControl from './TextureControl'\r\nimport OMLoader from './OMLoader'\r\nimport ViewerControl from './ViewerControl'\r\nimport utils from './Utils'\r\n\r\nlet requestAnimationFrameId = 0;\r\n\r\nlet context\r\nlet oMLoader\r\nlet viewerControl\r\nlet textureControl\r\n\r\n/**\r\n * 3d 模型显示类\r\n * @constructor\r\n */\r\nfunction ThreeViewer() {\r\n    context = new Context()\r\n    oMLoader = new OMLoader(context)\r\n    viewerControl = new ViewerControl(context)\r\n}\r\n\r\n/**\r\n * 销毁 context\r\n */\r\nThreeViewer.prototype.destroy = function (){\r\n\r\n    // 移除obj\r\n    for(let key in context.meshs){\r\n        this.removeObj(context.key2url(key))\r\n    }\r\n\r\n    // 停止渲染\r\n    console.log(`cancel requestAnimationFrameId id:  ${requestAnimationFrameId}` )\r\n    cancelAnimationFrame(requestAnimationFrameId)\r\n    requestAnimationFrameId = 0\r\n\r\n    // 清空node节点\r\n    context.settings.container && (context.settings.container.innerHTML = \"\");\r\n\r\n    // 重置 context\r\n    context.reset()\r\n}\r\n\r\n/**\r\n * 初始化 context\r\n * @param settings\r\n */\r\nThreeViewer.prototype.init = function (settings) {\r\n\r\n    let _this = this\r\n\r\n    if (!Detector.webgl) Detector.addGetWebGLMessage();\r\n\r\n    _this.destroy()\r\n\r\n    // 初始化渲染上下文对象\r\n    context.init(settings)\r\n\r\n    textureControl = new TextureControl(context,function () {\r\n        // 如果初始化传入了模型，加载它\r\n        if(context.settings.mesh && context.settings.mesh instanceof Array){\r\n\r\n            for(let i in context.settings.mesh){\r\n                _this.addObj(context.settings.mesh[i].obj, context.settings.mesh[i].mtl, {\r\n                    isBasic: i==0,\r\n                    success:i==0 ? context.settings.success : undefined\r\n                })\r\n            }\r\n        }else {\r\n            utils.callFunc(context.settings.success)\r\n        }\r\n    })\r\n\r\n}\r\n\r\n/**\r\n * 重置正视\r\n */\r\nThreeViewer.prototype.toFront = function () { viewerControl.bestLook() }\r\n\r\n/**\r\n * 网格显示开关\r\n */\r\nThreeViewer.prototype.toggleWire = function () {\r\n    context.settings.showWire = !context.settings.showWire;\r\n\r\n    changeObjsStatus(context.meshs)\r\n\r\n    return context.settings.showWire\r\n}\r\n\r\n/**\r\n * 纹理显示开关\r\n */\r\nThreeViewer.prototype.toggleTexture = function () {\r\n    context.settings.showTexture = !context.settings.showTexture;\r\n\r\n    changeObjsStatus(context.meshs)\r\n\r\n    return context.settings.showTexture\r\n}\r\n\r\n/**\r\n * 自动旋转开关\r\n */\r\nThreeViewer.prototype.toggleRotate = function () {\r\n    context.settings.rotate = !context.settings.rotate;\r\n    return context.settings.rotate\r\n}\r\n\r\n/**\r\n * 更换模型纹理\r\n * @param objUrl\r\n * @param mtlUrl\r\n */\r\nThreeViewer.prototype.changeTexture = function (objUrl, mtlUrl) {\r\n\r\n    let key = Buffer.from(objUrl).toString('base64')\r\n\r\n    //模型存在\r\n    if (key in context.meshs && context.meshs[key].obj){\r\n\r\n        oMLoader.loadMTL(mtlUrl, function (textureMat) {\r\n            context.meshs[key].textureMat = textureMat\r\n            // 切换纹理需要重新创建渲染材质\r\n            textureControl.mixinTexture(context.meshs[key])\r\n        })\r\n        return\r\n    }\r\n\r\n    console.log(`模型 ${objUrl} 不存在`)\r\n}\r\n\r\n/**\r\n * 添加模型\r\n * @param url\r\n * @param mtlurl\r\n * @param options\r\n */\r\nThreeViewer.prototype.addObj = function (url,mtlurl,options={isBasic:false}) {\r\n\r\n    let key = context.url2key(url)\r\n\r\n    let basicMesh = context.getBasicMesh()\r\n    if(options.isBasic && basicMesh && basicMesh.key !== key )\r\n        throw new Error(`已有基础模型: ${context.key2url(basicMesh.key)},不能再次添加基础模型: ${context.key2url(key)}`)\r\n\r\n    //已经成功加载过的模型\r\n    if (key in context.meshs && context.meshs[key].obj){\r\n\r\n        //被隐藏，重新显示\r\n        if (context.meshs[key].hide){\r\n            console.log(`模型 ${url} 已成功加载过，使用内存数据`)\r\n            context.meshs[key].hide = false\r\n            // 重新载入需要重新读取模型展示状态\r\n            textureControl.mixinTexture(context.meshs[key])\r\n            context.scene.add(context.meshs[key].obj)\r\n            return\r\n        }else{\r\n            console.log(`模型 ${url} 已在渲染，无需重复添加`)\r\n            return\r\n        }\r\n    }\r\n\r\n    // 加载完成前就分配缓存对象空间，便于后续管理去重\r\n    context.meshs[key] = {isBasic : options.isBasic}\r\n\r\n    // 没加载过或者被销毁\r\n    oMLoader.loadOM(url, mtlurl, function (mesh) {\r\n\r\n        // 加载失败\r\n        if (!mesh.obj) {\r\n            delete context.meshs[key]\r\n            return\r\n        }\r\n\r\n        // 贴纹理\r\n        textureControl.mixinTexture(mesh)\r\n\r\n        // 缓存到渲染列表\r\n        mesh.isBasic = options.isBasic\r\n        context.meshs[context.url2key(url)] = mesh\r\n\r\n        // 添加到渲染列表\r\n        context.scene.add(mesh.obj);\r\n\r\n        // 是基础模型,或者只有一个模型调整相机视角\r\n        (options.isBasic || context.meshKeys().length === 1) && (viewerControl.bestPosition(), viewerControl.bestLook());\r\n\r\n        context.configPLight()\r\n\r\n        // 没有开始渲染调用渲染函数开始渲染\r\n        !requestAnimationFrameId && render();\r\n\r\n        console.log(`模型: ${url} 加载成功`)\r\n        utils.callFunc(options.success)\r\n    });\r\n}\r\n\r\n/**\r\n * 移除指定模型\r\n * @param url\r\n */\r\nThreeViewer.prototype.removeObj = function (url){\r\n    let key = context.url2key(url)\r\n    if(key in context.meshs){\r\n        context.scene.remove(context.meshs[key].obj)\r\n        context.meshs[key].hide = true\r\n        console.log(`已移除模型: ${url}`)\r\n    }else{\r\n        console.log(`渲染列表无此模型: ${url}，无需删除`)\r\n    }\r\n}\r\n\r\n/**\r\n * 渲染\r\n */\r\nfunction render() {\r\n\r\n    context.settings.rotate && viewerControl.rotateLeft();\r\n    //for cameras\r\n    context.controls.update();\r\n    context.renderer.render(context.scene, context.camera);\r\n\r\n    requestAnimationFrameId = requestAnimationFrame(render)\r\n\r\n}\r\n\r\n/**\r\n * 批量修改模型显示属性\r\n * @param meshs\r\n */\r\nfunction changeObjsStatus (meshs) {\r\n    for(let mesh in meshs){\r\n        textureControl.mixinTexture(meshs[mesh])\r\n    }\r\n}\r\n\r\nexport default ThreeViewer\r\n","module.exports = __webpack_public_path__ + \"img/loading.8a62509b.png\";","/**\r\n * Loads a Wavefront .mtl file specifying materials\r\n *\r\n * @author angelxuanchang\r\n */\r\nvar THREE = require('three')\r\nTHREE.MTLLoader = function( baseUrl, options, crossOrigin ) {\r\n\r\n\tthis.baseUrl = baseUrl;\r\n\tthis.options = options;\r\n\tthis.crossOrigin = crossOrigin;\r\n\r\n};\r\n\r\nTHREE.MTLLoader.prototype = {\r\n\r\n\tconstructor: THREE.MTLLoader,\r\n\r\n\tload: function ( url, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader();\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * Parses loaded MTL file\r\n\t * @param text - Content of MTL file\r\n\t * @return {THREE.MTLLoader.MaterialCreator}\r\n\t */\r\n\tparse: function ( text ) {\r\n\r\n\t\tvar lines = text.split( \"\\n\" );\r\n\t\tvar info = {};\r\n\t\tvar delimiter_pattern = /\\s+/;\r\n\t\tvar materialsInfo = {};\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tvar line = lines[ i ];\r\n\t\t\tline = line.trim();\r\n\r\n\t\t\tif ( line.length === 0 || line.charAt( 0 ) === '#' ) {\r\n\r\n\t\t\t\t// Blank line or comment ignore\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar pos = line.indexOf( ' ' );\r\n\r\n\t\t\tvar key = ( pos >= 0 ) ? line.substring( 0, pos ) : line;\r\n\t\t\tkey = key.toLowerCase();\r\n\r\n\t\t\tvar value = ( pos >= 0 ) ? line.substring( pos + 1 ) : \"\";\r\n\t\t\tvalue = value.trim();\r\n\r\n\t\t\tif ( key === \"newmtl\" ) {\r\n\r\n\t\t\t\t// New material\r\n\r\n\t\t\t\tinfo = { name: value };\r\n\t\t\t\tmaterialsInfo[ value ] = info;\r\n\r\n\t\t\t} else if ( info ) {\r\n\r\n\t\t\t\tif ( key === \"ka\" || key === \"kd\" || key === \"ks\" ) {\r\n\r\n\t\t\t\t\tvar ss = value.split( delimiter_pattern, 3 );\r\n\t\t\t\t\tinfo[ key ] = [ parseFloat( ss[0] ), parseFloat( ss[1] ), parseFloat( ss[2] ) ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tinfo[ key ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar materialCreator = new THREE.MTLLoader.MaterialCreator( this.baseUrl, this.options );\r\n\t\tmaterialCreator.setMaterials( materialsInfo );\r\n\t\treturn materialCreator;\r\n\r\n\t}\r\n\r\n};\r\n\r\n/**\r\n * Create a new THREE-MTLLoader.MaterialCreator\r\n * @param baseUrl - Url relative to which textures are loaded\r\n * @param options - Set of options on how to construct the materials\r\n *                  side: Which side to apply the material\r\n *                        THREE.FrontSide (default), THREE.BackSide, THREE.DoubleSide\r\n *                  wrap: What type of wrapping to apply for textures\r\n *                        THREE.RepeatWrapping (default), THREE.ClampToEdgeWrapping, THREE.MirroredRepeatWrapping\r\n *                  normalizeRGB: RGBs need to be normalized to 0-1 from 0-255\r\n *                                Default: false, assumed to be already normalized\r\n *                  ignoreZeroRGBs: Ignore values of RGBs (Ka,Kd,Ks) that are all 0's\r\n *                                  Default: false\r\n *                  invertTransparency: If transparency need to be inverted (inversion is needed if d = 0 is fully opaque)\r\n *                                      Default: false (d = 1 is fully opaque)\r\n * @constructor\r\n */\r\n\r\nTHREE.MTLLoader.MaterialCreator = function( baseUrl, options ) {\r\n\r\n\tthis.baseUrl = baseUrl;\r\n\tthis.options = options;\r\n\tthis.materialsInfo = {};\r\n\tthis.materials = {};\r\n\tthis.materialsArray = [];\r\n\tthis.nameLookup = {};\r\n\r\n\tthis.side = ( this.options && this.options.side )? this.options.side: THREE.FrontSide;\r\n\tthis.wrap = ( this.options && this.options.wrap )? this.options.wrap: THREE.RepeatWrapping;\r\n\r\n};\r\n\r\nTHREE.MTLLoader.MaterialCreator.prototype = {\r\n\r\n\tconstructor: THREE.MTLLoader.MaterialCreator,\r\n\r\n\tsetMaterials: function( materialsInfo ) {\r\n\r\n\t\tthis.materialsInfo = this.convert( materialsInfo );\r\n\t\tthis.materials = {};\r\n\t\tthis.materialsArray = [];\r\n\t\tthis.nameLookup = {};\r\n\r\n\t},\r\n\r\n\tconvert: function( materialsInfo ) {\r\n\r\n\t\tif ( !this.options ) return materialsInfo;\r\n\r\n\t\tvar converted = {};\r\n\r\n\t\tfor ( var mn in materialsInfo ) {\r\n\r\n\t\t\t// Convert materials info into normalized form based on options\r\n\r\n\t\t\tvar mat = materialsInfo[ mn ];\r\n\r\n\t\t\tvar covmat = {};\r\n\r\n\t\t\tconverted[ mn ] = covmat;\r\n\r\n\t\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\t\tvar save = true;\r\n\t\t\t\tvar value = mat[ prop ];\r\n\t\t\t\tvar lprop = prop.toLowerCase();\r\n\r\n\t\t\t\tswitch ( lprop ) {\r\n\r\n\t\t\t\t\tcase 'kd':\r\n\t\t\t\t\tcase 'ka':\r\n\t\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.normalizeRGB ) {\r\n\r\n\t\t\t\t\t\t\tvalue = [ value[ 0 ] / 255, value[ 1 ] / 255, value[ 2 ] / 255 ];\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.ignoreZeroRGBs ) {\r\n\r\n\t\t\t\t\t\t\tif ( value[ 0 ] === 0 && value[ 1 ] === 0 && value[ 1 ] === 0 ) {\r\n\r\n\t\t\t\t\t\t\t\t// ignore\r\n\r\n\t\t\t\t\t\t\t\tsave = false;\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'd':\r\n\r\n\t\t\t\t\t\t// According to MTL format (http://paulbourke.net/dataformats/mtl/):\r\n\t\t\t\t\t\t//   d is dissolve for current material\r\n\t\t\t\t\t\t//   factor of 1.0 is fully opaque, a factor of 0 is fully dissolved (completely transparent)\r\n\r\n\t\t\t\t\t\tif ( this.options && this.options.invertTransparency ) {\r\n\r\n\t\t\t\t\t\t\tvalue = 1 - value;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( save ) {\r\n\r\n\t\t\t\t\tcovmat[ lprop ] = value;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn converted;\r\n\r\n\t},\r\n\r\n\tpreload: function () {\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.create( mn );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetIndex: function( materialName ) {\r\n\r\n\t\treturn this.nameLookup[ materialName ];\r\n\r\n\t},\r\n\r\n\tgetAsArray: function() {\r\n\r\n\t\tvar index = 0;\r\n\r\n\t\tfor ( var mn in this.materialsInfo ) {\r\n\r\n\t\t\tthis.materialsArray[ index ] = this.create( mn );\r\n\t\t\tthis.nameLookup[ mn ] = index;\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materialsArray;\r\n\r\n\t},\r\n\r\n\tcreate: function ( materialName ) {\r\n\r\n\t\tif ( this.materials[ materialName ] === undefined ) {\r\n\r\n\t\t\tthis.createMaterial_( materialName );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\tcreateMaterial_: function ( materialName ) {\r\n\r\n\t\t// Create material\r\n\r\n\t\tvar mat = this.materialsInfo[ materialName ];\r\n\t\tvar params = {\r\n\r\n\t\t\tname: materialName,\r\n\t\t\tside: this.side\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var prop in mat ) {\r\n\r\n\t\t\tvar value = mat[ prop ];\r\n\r\n\t\t\tswitch ( prop.toLowerCase() ) {\r\n\r\n\t\t\t\t// Ns is material specular exponent\r\n\r\n\t\t\t\tcase 'kd':\r\n\r\n\t\t\t\t\t// Diffuse color (color under white light) using RGB values\r\n\r\n\t\t\t\t\tparams[ 'diffuse' ] = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ka':\r\n\r\n\t\t\t\t\t// Ambient color (color under shadow) using RGB values\r\n\r\n\t\t\t\t\tparams[ 'ambient' ] = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ks':\r\n\r\n\t\t\t\t\t// Specular color (color when light is reflected from shiny surface) using RGB values\r\n\t\t\t\t\tparams[ 'specular' ] = new THREE.Color().fromArray( value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'map_kd':\r\n\r\n\t\t\t\t\t// Diffuse texture map\r\n\r\n\t\t\t\t\tparams[ 'map' ] = this.loadTexture( this.baseUrl + value );\r\n\t\t\t\t\tparams[ 'map' ].wrapS = this.wrap;\r\n\t\t\t\t\tparams[ 'map' ].wrapT = this.wrap;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'ns':\r\n\r\n\t\t\t\t\t// The specular exponent (defines the focus of the specular highlight)\r\n\t\t\t\t\t// A high exponent results in a tight, concentrated highlight. Ns values normally range from 0 to 1000.\r\n\r\n\t\t\t\t\tparams['shininess'] = value;\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'd':\r\n\r\n\t\t\t\t\t// According to MTL format (http://paulbourke.net/dataformats/mtl/):\r\n\t\t\t\t\t//   d is dissolve for current material\r\n\t\t\t\t\t//   factor of 1.0 is fully opaque, a factor of 0 is fully dissolved (completely transparent)\r\n\r\n\t\t\t\t\tif ( value < 1 ) {\r\n\r\n\t\t\t\t\t\tparams['transparent'] = true;\r\n\t\t\t\t\t\tparams['opacity'] = value;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( params[ 'diffuse' ] ) {\r\n\r\n\t\t\tif ( !params[ 'ambient' ]) params[ 'ambient' ] = params[ 'diffuse' ];\r\n\t\t\tparams[ 'color' ] = params[ 'diffuse' ];\r\n\r\n\t\t}\r\n\r\n\t\tthis.materials[ materialName ] = new THREE.MeshPhongMaterial( params );\r\n\t\treturn this.materials[ materialName ];\r\n\r\n\t},\r\n\r\n\r\n\tloadTexture: function ( url, mapping, onLoad ) {\r\n\r\n\t\tvar texture;\r\n\t\tvar loader = THREE.Loader.Handlers.get( url );\r\n\r\n\t\tif ( loader !== null ) {\r\n\r\n\t\t\ttexture = loader.load( url, onLoad );\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\tloader = new THREE.ImageLoader();\r\n\t\t\tloader.crossOrigin = this.crossOrigin;\r\n\t\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\t\ttexture.image = THREE.MTLLoader.ensurePowerOfTwo_( image );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\ttexture.mapping = mapping;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MTLLoader.ensurePowerOfTwo_ = function ( image ) {\r\n\r\n\tif ( ! THREE.Math.isPowerOfTwo( image.width ) || ! THREE.Math.isPowerOfTwo( image.height ) ) {\r\n\r\n\t\tvar canvas = document.createElement( \"canvas\" );\r\n\t\tcanvas.width = THREE.MTLLoader.nextHighestPowerOfTwo_( image.width );\r\n\t\tcanvas.height = THREE.MTLLoader.nextHighestPowerOfTwo_( image.height );\r\n\r\n\t\tvar ctx = canvas.getContext(\"2d\");\r\n\t\tctx.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\t\treturn canvas;\r\n\r\n\t}\r\n\r\n\treturn image;\r\n\r\n};\r\n\r\nTHREE.MTLLoader.nextHighestPowerOfTwo_ = function( x ) {\r\n\r\n\t--x;\r\n\r\n\tfor ( var i = 1; i < 32; i <<= 1 ) {\r\n\r\n\t\tx = x | x >> i;\r\n\r\n\t}\r\n\r\n\treturn x + 1;\r\n\r\n};\r\n\r\n//THREE.EventDispatcher.prototype.apply( THREE.MTLLoader.prototype );\r\n","/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mr.doob / http://mrdoob.com/\r\n */\r\n\r\nvar Detector = {\r\n\r\n\tcanvas: !! window.CanvasRenderingContext2D,\r\n\twebgl: ( function () { try { var canvas = document.createElement( 'canvas' ); return !! window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ); } catch( e ) { return false; } } )(),\r\n\tworkers: !! window.Worker,\r\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\r\n\r\n\tgetWebGLErrorMessage: function () {\r\n\r\n\t\tvar element = document.createElement( 'div' );\r\n\t\telement.id = 'webgl-error-message';\r\n\t\telement.style.fontFamily = 'monospace';\r\n\t\telement.style.fontSize = '13px';\r\n\t\telement.style.fontWeight = 'normal';\r\n\t\telement.style.textAlign = 'center';\r\n\t\telement.style.background = '#fff';\r\n\t\telement.style.color = '#000';\r\n\t\telement.style.padding = '1.5em';\r\n\t\telement.style.width = '400px';\r\n\t\telement.style.margin = '5em auto 0';\r\n\r\n\t\tif ( ! this.webgl ) {\r\n\r\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\r\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join( '\\n' ) : [\r\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\r\n\t},\r\n\r\n\taddGetWebGLMessage: function ( parameters ) {\r\n\r\n\t\tvar parent, id, element;\r\n\r\n\t\tparameters = parameters || {};\r\n\r\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\r\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\r\n\r\n\t\telement = Detector.getWebGLErrorMessage();\r\n\t\telement.id = id;\r\n\r\n\t\tparent.appendChild( element );\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport default Detector"],"sourceRoot":""}